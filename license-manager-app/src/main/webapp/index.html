<!DOCTYPE html>
<!--
  ~ Copyright (c) 2018, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
  ~
  ~ WSO2 Inc. licenses this file to you under the Apache License,
  ~ Version 2.0 (the "License"); you may not use this file except
  ~ in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied. See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>File Uploader</title>
</head>

<body>

    <h1>
        License Manager
    </h1>
    <button id="btnTest">Test</button>
    <form method="POST" enctype="multipart/form-data" id="fileUploadForm">
        <input type="file" name="files" />
        <input type="submit" value="Submit" id="btnSubmit" />
    </form>
    <button id="btnListPacks">List Packs</button>
    <button id="btnCheckJar">Check Jars</button>
    <form method="POST" enctype="application/json" id="enterName">
        <input type="text" name="extraField" />
        <br/>
        <br/>
        <input type="submit" value="Submit" id="btnSubmitName" />
    </form>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>


    <script>
        $(document).ready(function () {

            $("#btnSubmit").click(function (event) {

                //stop submit the form, we will post it manually.
                event.preventDefault();

                // Get form
                var form = $('#fileUploadForm')[0];

                // Create an FormData object 
                var data = new FormData(form);
                // disabled the submit button
                $("#btnSubmit").prop("disabled", true);

                $.ajax({
                    type: "POST",
                    enctype: 'multipart/form-data',
                    url: " http://localhost:9091/uploadPack",
                    data: data,
                    processData: false,
                    contentType: false,
                    cache: false,
                    timeout: 600000,
                    success: function (data) {

                        $("#result").text(data);
                        console.log("SUCCESS : ", data);
                        $("#btnSubmit").prop("disabled", false);

                    },
                    error: function (e) {

                        $("#result").text(e.responseText);
                        console.log("ERROR : ", e);
                        $("#btnSubmit").prop("disabled", false);

                    }
                });

            });

            $("#btnTest").click(function (event) {

                //stop submit the form, we will post it manually.
                event.preventDefault();
                $.ajax({
                    'url': 'http://localhost:9091/test',
                    'type': 'GET',
                    'success': function (data) {
                        console.log("SUCCESS : ", data);
                        if (data == "success") {
                            alert('request sent!');
                        }
                    }
                });
            });
            $("#btnListPacks").click(function (event) {

                //stop submit the form, we will post it manually.
                event.preventDefault();
                $.ajax({
                    'url': 'http://localhost:9091/getPacks',
                    'type': 'GET',
                    'success': function (data) {
                        console.log("SUCCESS : ", data);
                    }
                });
            });
            $("#btnCheckJar").click(function (event) {

                //stop submit the form, we will post it manually.
                event.preventDefault();
                $.ajax({
                    'url': 'http://localhost:9091/checkJars',
                    'type': 'GET',
                    'success': function (data) {
                        console.log("SUCCESS : ", data);
                    }
                });
            });
            
            $("#btnSubmitName").click(function (event) {

                //stop submit the form, we will post it manually.
                event.preventDefault();
                $("#btnSubmit").prop("disabled", true);

                $.ajax({
                    type: "POST",
                    enctype: 'application/json',
                    url: " http://localhost:9091/enterJars",
                    data: "entering",
                    processData: false,
                    contentType: false,
                    cache: false,
                    timeout: 600000,
                    success: function (data) {

                        $("#result").text(data);
                        console.log("SUCCESS : ", data);
                        $("#btnSubmit").prop("disabled", false);

                    },
                    error: function (e) {

                        $("#result").text(e.responseText);
                        console.log("ERROR : ", e);
                        $("#btnSubmit").prop("disabled", false);

                    }
                });

            });
        });

    </script>
</body>

</html>